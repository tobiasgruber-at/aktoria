<form
  (ngSubmit)="submit()"
  [formGroup]="form"
  class="form d-flex flex-column flex-grow-1"
>
  <h2 class="mb-4">Lernabschnitt erstellen</h2>
  <div class="form-group mb-4">
    <label for="input-section-name">Bezeichnung</label>
    <input
      class="form-control"
      formControlName="sectionName"
      id="input-section-name"
      name="sectionName"
      placeholder="Bezeichnung des Abschnitts"
      type="text"
    />
    <app-form-errors>
      <app-form-error *ngIf="fieldHasErrors('sectionName', 'required')"
        >Bitte gib eine Bezeichnung an.
      </app-form-error>
      <app-form-error *ngIf="fieldHasErrors('sectionName', 'maxlength')"
        >Bezeichnung zu lange.
      </app-form-error>
    </app-form-errors>
  </div>
  <div class="form-group mb-4">
    <label for="input-section-name">Start</label>
    <p class="mb-0">
      <ng-container
        *ngIf="isMarkingSection === 'start'; else markingStartCompleted"
      >
        Bitte
        <strong class="text-primary">wähle eine Startzeile</strong> aus.
      </ng-container>
      <ng-template #markingStartCompleted>
        Seite
        {{ markedSection?.getStartPage(script) }}
      </ng-template>
    </p>
  </div>
  <div
    [class.opacity-50]="isMarkingSection && isMarkingSection !== 'end'"
    class="form-group mb-4"
  >
    <label for="input-section-name">Ende</label>
    <p class="mb-0">
      <ng-container *ngIf="isMarkingSection; else markingEndCompleted">
        Bitte
        <strong
          [class]="
            isMarkingSection === 'end' ? 'text-primary' : 'text-secondary'
          "
          >wähle eine Endzeile</strong
        >
        aus.
      </ng-container>
      <ng-template #markingEndCompleted>
        Seite
        {{ markedSection?.getEndPage(script) }}
      </ng-template>
    </p>
  </div>
  <div class="flex-grow-1"></div>
  <div class="d-flex flex-column align-items-stretch mt-3">
    <app-button
      [disabled]="hasError()"
      [fullWidth]="true"
      [loading]="loading"
      class="mb-2"
      label="Abschnitt proben"
      type="submit"
    ></app-button>
    <button
      (click)="onCancel()"
      class="btn btn-outline-secondary"
      type="button"
    >
      Abbrechen
    </button>
  </div>
</form>
