<form
  (ngSubmit)="submit()"
  [formGroup]="form"
  class="form d-flex flex-column flex-grow-1"
>
  <h3 class="mb-3">Lernabschnitt erstellen</h3>
  <div class="form-group mb-4">
    <label for="input-section-name">Bezeichnung</label>
    <input
      class="form-control"
      formControlName="sectionName"
      id="input-section-name"
      name="sectionName"
      placeholder="Bezeichnung des Abschnitts"
      type="text"
    />
    <app-form-errors>
      <app-form-error *ngIf="fieldHasErrors('sectionName', 'required')"
        >Bitte gib eine Bezeichnung an.
      </app-form-error>
      <app-form-error *ngIf="fieldHasErrors('sectionName', 'maxlength')"
        >Bezeichnung zu lange.
      </app-form-error>
    </app-form-errors>
  </div>
  <div class="form-group mb-4">
    <label for="input-section-name">Start</label>
    <p class="mb-0">
      <app-select-line-text
        *ngIf="isMarkingSection === 'start'; else markingStartCompleted"
        subject="Startzeile"
        [hasErrors]="fieldHasErrors('startLine', 'required')"
      ></app-select-line-text>
      <ng-template #markingStartCompleted>
        Seite
        {{ markedSection?.getStartPage(script) }}
      </ng-template>
    </p>
    <app-form-errors></app-form-errors>
  </div>
  <div
    [class.opacity-50]="isMarkingSection && isMarkingSection !== 'end'"
    class="form-group mb-4"
  >
    <label for="input-section-name">Ende</label>
    <p class="mb-0">
      <app-select-line-text
        *ngIf="isMarkingSection; else markingEndCompleted"
        subject="Endzeile"
        [disabled]="isMarkingSection !== 'end'"
        [hasErrors]="fieldHasErrors('endLine', 'required')"
      ></app-select-line-text>
      <ng-template #markingEndCompleted>
        Seite
        {{ markedSection?.getEndPage(script) }}
      </ng-template>
    </p>
  </div>
  <div class="flex-grow-1"></div>
  <div class="d-flex flex-column align-items-stretch mt-3">
    <app-button
      [disabled]="hasError()"
      [fullWidth]="true"
      [loading]="loading"
      class="mb-2"
      label="Abschnitt proben"
      type="submit"
    ></app-button>
    <button
      (click)="onCancel()"
      class="btn btn-outline-secondary"
      type="button"
    >
      Abbrechen
    </button>
  </div>
</form>
