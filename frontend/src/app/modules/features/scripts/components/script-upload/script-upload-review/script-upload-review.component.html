<app-page-layout [loading]="getLoading" [showSidebar]="true" theme="dark">
  <app-script-viewer></app-script-viewer>
  <form
    (ngSubmit)="submit()"
    [formGroup]="form"
    class="form d-flex flex-column flex-grow-1"
    role="sidebar"
  >
    <div class="form-group mb-3">
      <label for="input-script-name">Bezeichnung</label>
      <input
        class="form-control"
        formControlName="scriptName"
        id="input-script-name"
        name="scriptName"
        placeholder="Skriptbezeichnung"
        type="text"
      />
      <app-form-errors>
        <app-form-error *ngIf="fieldHasErrors('scriptName', 'required')"
          >Bitte gib eine Bezeichnung an.
        </app-form-error>
        <app-form-error *ngIf="fieldHasErrors('scriptName', 'maxlength')"
          >Bezeichnung zu lange.
        </app-form-error>
      </app-form-errors>
    </div>
    <div class="form-group mb-3">
      <h3>Rollen</h3>
      <app-script-roles-list
        (roleClicked)="scriptViewerService.setSelectedRole($event)"
        [roles]="(scriptViewerService.$script | async).roles"
        [selectedRole]="scriptViewerService.$selectedRole | async"
      ></app-script-roles-list>
    </div>
    <div class="flex-grow-1"></div>
    <div class="d-flex justify-content-center">
      <app-button
        [disabled]="hasError()"
        [loading]="loading"
        label="Skript abpeichern"
        type="submit"
      ></app-button>
    </div>
  </form>
</app-page-layout>
